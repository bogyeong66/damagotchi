<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ì´ë™í•˜ëŠ” ë‹¤ë§ˆê³ ì¹˜</title>
    <style>
        :root {
            --bg-color: #a8e6cf; /* ê¸°ë³¸ ì§‘ ë°°ê²½ */
        }
        body { margin: 0; display: flex; flex-direction: column; align-items: center; justify-content: center; height: 100vh; background: #2f3640; font-family: sans-serif; overflow: hidden; }

        /* ê²Œì„ í™”ë©´ ì»¨í…Œì´ë„ˆ */
        #game-world {
            position: relative;
            width: 400px;
            height: 400px;
            background-color: var(--bg-color);
            border: 10px solid #f1f2f6;
            border-radius: 20px;
            overflow: hidden;
            transition: background 0.5s;
        }

        /* ì¥ì†Œ í‘œì‹œ í…ìŠ¤íŠ¸ */
        #location-tag {
            position: absolute;
            top: 10px;
            left: 10px;
            background: rgba(255,255,255,0.7);
            padding: 5px 10px;
            border-radius: 10px;
            font-weight: bold;
        }

        /* ìºë¦­í„° */
        #pet {
            position: absolute;
            font-size: 50px;
            width: 60px;
            height: 60px;
            display: flex;
            justify-content: center;
            align-items: center;
            transition: left 0.5s ease-out, top 0.5s ease-out; /* ë¶€ë“œëŸ¬ìš´ ì´ë™ */
            cursor: pointer;
            z-index: 10;
        }

        /* í•˜ë‹¨ ì»¨íŠ¸ë¡¤ ë°” */
        .ui-panel {
            width: 420px;
            background: white;
            padding: 20px;
            margin-top: 10px;
            border-radius: 15px;
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 10px;
        }

        .stats { grid-column: span 2; display: flex; justify-content: space-around; margin-bottom: 10px; background: #eee; padding: 10px; border-radius: 10px; }
        
        button {
            padding: 10px;
            border: none;
            border-radius: 8px;
            background: #ff7675;
            color: white;
            font-weight: bold;
            cursor: pointer;
        }
        button:hover { opacity: 0.9; }
        button.move-btn { background: #0984e3; }
    </style>
</head>
<body>

<div id="game-world">
    <div id="location-tag">ğŸ  ìš°ë¦¬ì§‘</div>
    <div id="pet" style="left: 170px; top: 170px;">ğŸ£</div>
</div>

<div class="ui-panel">
    <div class="stats">
        <span>ë°°ë¶€ë¦„: <b id="hunger">100</b></span>
        <span>í–‰ë³µë„: <b id="happiness">100</b></span>
    </div>
    <button onclick="feed()">ğŸ ë°¥ì£¼ê¸°</button>
    <button onclick="play()">ğŸ§¸ ë†€ì•„ì£¼ê¸°</button>
    <button class="move-btn" onclick="changeLocation('home')">ğŸ  ì§‘ìœ¼ë¡œ</button>
    <button class="move-btn" onclick="changeLocation('park')">ğŸŒ³ ê³µì›ìœ¼ë¡œ</button>
</div>

<script>
    const pet = document.getElementById('pet');
    const world = document.getElementById('game-world');
    const locTag = document.getElementById('location-tag');
    
    let posX = 170;
    let posY = 170;
    let hunger = 100;
    let happiness = 100;
    let currentLoc = 'home';

    // 1. ìºë¦­í„° ìë™ ëœë¤ ì´ë™
    function randomMove() {
        if (hunger <= 0) return; // ì£½ìœ¼ë©´ ì•ˆ ì›€ì§ì„
        
        // ì›”ë“œ ì•ˆì—ì„œ ëœë¤ ì¢Œí‘œ ìƒì„±
        posX = Math.floor(Math.random() * (world.clientWidth - 60));
        posY = Math.floor(Math.random() * (world.clientHeight - 60));
        
        pet.style.left = posX + 'px';
        pet.style.top = posY + 'px';
    }

    // 3ì´ˆë§ˆë‹¤ ëœë¤í•˜ê²Œ ì›€ì§ì„
    setInterval(randomMove, 3000);

    // 2. ì¥ì†Œ ë³€ê²½ í•¨ìˆ˜
    function changeLocation(loc) {
        currentLoc = loc;
        if (loc === 'home') {
            world.style.setProperty('--bg-color', '#a8e6cf');
            locTag.innerText = "ğŸ  ìš°ë¦¬ì§‘";
            happiness += 5;
        } else {
            world.style.setProperty('--bg-color', '#fab1a0');
            locTag.innerText = "ğŸŒ³ ê³µì›";
            happiness += 10; // ê³µì› ê°€ë©´ ë” í–‰ë³µí•´ì§
        }
        updateStats();
        randomMove(); // ì¥ì†Œ ì´ë™ ì‹œ ìœ„ì¹˜ ì´ˆê¸°í™”
    }

    // 3. ê¸°ë³¸ ê¸°ëŠ¥ (ë°¥ì£¼ê¸°, ë†€ê¸°)
    function feed() {
        hunger = Math.min(hunger + 20, 100);
        pet.innerText = "ğŸ˜‹";
        setTimeout(() => pet.innerText = "ğŸ¥", 1000);
        updateStats();
    }

    function play() {
        happiness = Math.min(happiness + 20, 100);
        pet.innerText = "âš½";
        setTimeout(() => pet.innerText = "ğŸ¥", 1000);
        updateStats();
    }

    function updateStats() {
        document.getElementById('hunger').innerText = hunger;
        document.getElementById('happiness').innerText = happiness;
    }

    // 4. ì‹œê°„ ê²½ê³¼ì— ë”°ë¥¸ ìˆ˜ì¹˜ ê°ì†Œ
    setInterval(() => {
        hunger = Math.max(hunger - 2, 0);
        happiness = Math.max(happiness - 1, 0);
        updateStats();
        
        if (hunger <= 0) {
            pet.innerText = "ğŸ‘»";
            locTag.innerText = "ê²Œì„ ì˜¤ë²„";
        }
    }, 2000);

    // ìºë¦­í„° í´ë¦­ ì‹œ ë°˜ì‘
    pet.addEventListener('click', () => {
        pet.style.transform = "scale(1.5)";
        setTimeout(() => pet.style.transform = "scale(1)", 200);
        happiness = Math.min(happiness + 2, 100);
        updateStats();
    });

</script>

</body>
</html>
